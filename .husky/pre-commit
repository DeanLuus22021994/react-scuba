#!/bin/bash

# Check if vitest can actually run (not just if command exists)
if npx vitest --version &> /dev/null; then
  echo "Running full pre-commit checks..."
  npm_config_loglevel=error npm run precommit
else
  echo "Running simplified pre-commit checks (vitest not available)..."
  # Run only linting and formatting checks
  npm_config_loglevel=error npm run check
fi

# Stage generated test reports if they exist
if [ -f "docs/testing/testing.md" ]; then
  git add docs/testing/testing.md docs/testing/test-results.json docs/testing/index.html
fi
