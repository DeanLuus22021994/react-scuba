{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Multi-Tenant Specification Schema",
  "description": "Schema for validating multi-tenant configuration and documentation",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "multi_tenancy": {
      "type": "object",
      "properties": {
        "isolation_level": {
          "type": "string",
          "enum": ["database", "schema", "row", "application"]
        },
        "tenant_resolution": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["subdomain", "domain", "header", "path", "environment"]
          }
        },
        "configuration_method": {
          "type": "string",
          "enum": ["runtime", "build-time", "hybrid"]
        }
      },
      "required": ["isolation_level", "tenant_resolution", "configuration_method"]
    },
    "tenants": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$"
          },
          "name": {
            "type": "string"
          },
          "domain": {
            "type": "string",
            "format": "hostname"
          },
          "subdomain": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$"
          },
          "features": {
            "type": "object",
            "properties": {
              "booking": {
                "type": "boolean"
              },
              "courses": {
                "type": "boolean"
              },
              "equipment": {
                "type": "boolean"
              },
              "certification": {
                "type": "boolean"
              }
            }
          },
          "theme": {
            "type": "object",
            "properties": {
              "primary_color": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "secondary_color": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "font_family": {
                "type": "string"
              }
            }
          }
        },
        "required": ["id", "name", "domain", "features"]
      }
    },
    "content_resolution": {
      "type": "object",
      "properties": {
        "strategy": {
          "type": "string",
          "enum": ["fallback", "override", "merge"]
        },
        "asset_handling": {
          "type": "string",
          "enum": ["cdn", "local", "hybrid"]
        }
      },
      "required": ["strategy", "asset_handling"]
    }
  },
  "required": ["version", "multi_tenancy", "tenants", "content_resolution"]
}