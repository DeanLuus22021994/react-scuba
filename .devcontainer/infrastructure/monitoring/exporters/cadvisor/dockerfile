# ==============================================================================
# cAdvisor - Container Advisor for Docker
# ==============================================================================
# Purpose: Provides per-container resource usage and performance metrics
# Metrics: CPU, memory, network, filesystem I/O per container
# Prometheus: Exposes metrics at /metrics endpoint
# Reference: https://github.com/google/cadvisor
# Latest: v0.51.0 (December 2024)
# ==============================================================================

FROM gcr.io/cadvisor/cadvisor:v0.51.0

LABEL maintainer="Dean Luus" \
  description="cAdvisor - Container metrics exporter for Prometheus" \
  version="0.51.0" \
  org.opencontainers.image.source="https://github.com/google/cadvisor" \
  org.opencontainers.image.documentation="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md" \
  org.opencontainers.image.title="cAdvisor" \
  org.opencontainers.image.description="Analyzes resource usage and performance of running containers"

HEALTHCHECK --interval=30s --timeout=10s --start-period=20s --retries=3 \
  CMD wget --quiet --tries=1 --spider http://localhost:8080/healthz || exit 1
